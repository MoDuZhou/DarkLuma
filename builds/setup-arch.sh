#!/usr/bin/env bash

#  ____  _____ _____ _   _ ____          _    ____   ____ _   _ 
# / ___|| ____|_   _| | | |  _ \ _____  / \  |  _ \ / ___| | | |
# \___ \|  _|   | | | | | | |_) |_____|/ _ \ | |_) | |   | |_| |
#  ___) | |___  | | | |_| |  __/|_____/ ___ \|  _ <| |___|  _  |
# |____/|_____| |_|  \___/|_|        /_/   \_\_| \_\\____|_| |_|
#                                                              

SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )

# --------------------------------------------------------------
# Library
# --------------------------------------------------------------

source src/_libs.sh

# --------------------------------------------------------------
# General Packages
# --------------------------------------------------------------

source src/_pkgs.sh

# --------------------------------------------------------------
# Install Gum
# --------------------------------------------------------------

if [[ $(_checkCommandExists "gum") == 0 ]]; then
    echo ":: gum is already installed"
else
    echo ":: The installer requires gum. gum will be installed now"
    sudo pacman --noconfirm -S gum
fi

# --------------------------------------------------------------
# Header
# --------------------------------------------------------------

_writeHeader "Arch"

# --------------------------------------------------------------
# Install yay if needed
# --------------------------------------------------------------

if [[ $(_checkCommandExists "yay") == 0 ]]; then
    echo ":: yay is already installed"
else
    echo ":: The installer requires yay. yay will be installed now"
    _installYay
fi
# --------------------------------------------------------------
# General
# --------------------------------------------------------------

_installPackages "${general[@]}"

# --------------------------------------------------------------
# Apps
# --------------------------------------------------------------

_installPackages "${appPKG[@]}"

# --------------------------------------------------------------
# Tools
# --------------------------------------------------------------

_installPackages "${toolPKG[@]}"

# --------------------------------------------------------------
# Packages
# --------------------------------------------------------------

_installPackages "${dependencies[@]}"

# --------------------------------------------------------------
# Hyprland
# --------------------------------------------------------------

_installPackages "${wmPKG[@]}"

# --------------------------------------------------------------
# Font
# --------------------------------------------------------------

_installPackages "${fontPKG[@]}"

# --------------------------------------------------------------
# Config
# --------------------------------------------------------------

source src/_link.sh

# --------------------------------------------------------------
# Finish
# --------------------------------------------------------------

_finishMessage
